{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eugenechernomor/Downloads/optimizationProject-main/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/eugenechernomor/Downloads/optimizationProject-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/eugenechernomor/Downloads/optimizationProject-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/eugenechernomor/Downloads/optimizationProject-main/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,memo}from\"react\";import RandomNumberItem from\"./../RandomNumberItem/RandomNumberItem\";import{jsx as _jsx}from\"react/jsx-runtime\";var RandomNumber=function RandomNumber(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var promiseTimer=useRef();var asyncItem=function asyncItem(i){return new Promise(function(resolve){promiseTimer.current=setTimeout(function(){return resolve(i);},0);});};var infiniteNums=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(startValue){var buffer,i,item;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:buffer=[];i=startValue;case 2:if(!(i<startValue+100)){_context.next=10;break;}_context.next=5;return asyncItem(i);case 5:item=_context.sent;buffer=[].concat(_toConsumableArray(buffer),[item]);case 7:i++;_context.next=2;break;case 10:setValues(function(){return[].concat(_toConsumableArray(values),_toConsumableArray(buffer));});case 11:case\"end\":return _context.stop();}}},_callee);}));return function infiniteNums(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(values.length<1e9){infiniteNums(values.length);}},[values]);useEffect(function(){infiniteNums(values.length);return function(){clearTimeout(promiseTimer.current);};},[]);return/*#__PURE__*/_jsx(\"ul\",{style:{float:\"left\",width:\"100px\",overflowY:\"auto\",height:\"300px\",marginRight:\"40px\",padding:\"5px\"},children:values.map(function(val){return/*#__PURE__*/_jsx(RandomNumberItem,{value:val},val);})});};export default/*#__PURE__*/memo(RandomNumber);","map":{"version":3,"sources":["/Users/eugenechernomor/Downloads/optimizationProject-main/src/components/RandomNumber/RandomNumber.js"],"names":["React","useState","useEffect","useRef","memo","RandomNumberItem","RandomNumber","values","setValues","promiseTimer","asyncItem","i","Promise","resolve","current","setTimeout","infiniteNums","startValue","buffer","item","length","clearTimeout","float","width","overflowY","height","marginRight","padding","map","val"],"mappings":"qjBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,CAA6CC,IAA7C,KAAyD,OAAzD,CACA,MAAOC,CAAAA,gBAAP,KAA6B,wCAA7B,C,2CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,cAA4BL,QAAQ,CAAC,EAAD,CAApC,wCAAOM,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,YAAY,CAAGN,MAAM,EAA3B,CAEA,GAAMO,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,CAAD,CAAO,CACvB,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAa,CAC9BJ,YAAY,CAACK,OAAb,CAAuBC,UAAU,CAAC,iBAAMF,CAAAA,OAAO,CAACF,CAAD,CAAb,EAAD,CAAmB,CAAnB,CAAjC,CACD,CAFM,CAAP,CAGD,CAJD,CAMA,GAAMK,CAAAA,YAAY,0FAAG,iBAAOC,UAAP,oIACfC,MADe,CACN,EADM,CAGVP,CAHU,CAGNM,UAHM,aAGMN,CAAC,CAAGM,UAAU,CAAG,GAHvB,iDAIEP,CAAAA,SAAS,CAACC,CAAD,CAJX,QAIXQ,IAJW,eAKjBD,MAAM,8BAAOA,MAAP,GAAeC,IAAf,EAAN,CALiB,OAG4BR,CAAC,EAH7B,+BAQnBH,SAAS,CAAC,8CAAUD,MAAV,qBAAqBW,MAArB,IAAD,CAAT,CARmB,uDAAH,kBAAZF,CAAAA,YAAY,4CAAlB,CAWAd,SAAS,CAAC,UAAM,CACd,GAAIK,MAAM,CAACa,MAAP,CAAgB,GAApB,CAAyB,CACvBJ,YAAY,CAACT,MAAM,CAACa,MAAR,CAAZ,CACD,CACF,CAJQ,CAIN,CAACb,MAAD,CAJM,CAAT,CAMAL,SAAS,CAAC,UAAM,CACdc,YAAY,CAACT,MAAM,CAACa,MAAR,CAAZ,CAEA,MAAO,WAAM,CACXC,YAAY,CAACZ,YAAY,CAACK,OAAd,CAAZ,CACD,CAFD,CAGD,CANQ,CAMN,EANM,CAAT,CAQA,mBACE,WACE,KAAK,CAAE,CACLQ,KAAK,CAAE,MADF,CAELC,KAAK,CAAE,OAFF,CAGLC,SAAS,CAAE,MAHN,CAILC,MAAM,CAAE,OAJH,CAKLC,WAAW,CAAE,MALR,CAMLC,OAAO,CAAE,KANJ,CADT,UAUGpB,MAAM,CAACqB,GAAP,CAAW,SAACC,GAAD,qBACV,KAAC,gBAAD,EAAkB,KAAK,CAAEA,GAAzB,EAAmCA,GAAnC,CADU,EAAX,CAVH,EADF,CAgBD,CAnDD,CAqDA,2BAAezB,IAAI,CAACE,YAAD,CAAnB","sourcesContent":["import React, { useState, useEffect, useRef, memo } from \"react\";\nimport RandomNumberItem from \"./../RandomNumberItem/RandomNumberItem\";\n\nconst RandomNumber = () => {\n  const [values, setValues] = useState([]);\n  const promiseTimer = useRef();\n\n  const asyncItem = (i) => {\n    return new Promise((resolve) => {\n      promiseTimer.current = setTimeout(() => resolve(i), 0);\n    });\n  };\n\n  const infiniteNums = async (startValue) => {\n    let buffer = [];\n\n    for (let i = startValue; i < startValue + 100; i++) {\n      const item = await asyncItem(i);\n      buffer = [...buffer, item];\n    }\n\n    setValues(() => [...values, ...buffer]);\n  };\n\n  useEffect(() => {\n    if (values.length < 1e9) {\n      infiniteNums(values.length);\n    }\n  }, [values]);\n\n  useEffect(() => {\n    infiniteNums(values.length);\n\n    return () => {\n      clearTimeout(promiseTimer.current);\n    };\n  }, []);\n\n  return (\n    <ul\n      style={{\n        float: \"left\",\n        width: \"100px\",\n        overflowY: \"auto\",\n        height: \"300px\",\n        marginRight: \"40px\",\n        padding: \"5px\",\n      }}\n    >\n      {values.map((val) => (\n        <RandomNumberItem value={val} key={val} />\n      ))}\n    </ul>\n  );\n};\n\nexport default memo(RandomNumber);\n"]},"metadata":{},"sourceType":"module"}