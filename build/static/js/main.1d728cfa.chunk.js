(this.webpackJsonpoptimization=this.webpackJsonpoptimization||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var c,r=n(0),i=n.n(r),a=n(10),s=n.n(a),o=n(40),u=n(32),l=n(12),j=(n(82),n(2)),d=function(){return Object(j.jsxs)("div",{style:{display:"inline-flex"},children:[Object(j.jsx)(u.b,{style:{marginLeft:"20px",marginRight:"20px"},to:"/",children:"Home"}),Object(j.jsx)(u.b,{style:{marginLeft:"20px",marginRight:"20px"},to:"/posts",children:"Posts"}),Object(j.jsx)(u.b,{style:{marginLeft:"20px",marginRight:"20px"},to:"/heavycomponent",children:"Heavy component"})]})},b=function(){return Object(j.jsx)("div",{children:"Netlify test"})},f=n(17),O=n.n(f),p=n(24),m=n(9),h=n(13),x=n(30),v="GET_POSTS_REQUEST",g="GET_POSTS_SUCCESS",y="EDIT_POST",w="REMOVE_POST",E=n(44),_=n(66),k=n.n(_),S=new function e(t){if(Object(E.a)(this,e),e._instance)return e._instance;e._instance=this,t&&(this.api=k.a.create({baseURL:t})),this.api.interceptors.request.use((function(e){return e})),this.api.interceptors.response.use((function(e){return o.b.success("Resolved!"),e}),(function(e){return o.b.error(e.response.data),Promise.reject(e)}))}("https://jsonplaceholder.typicode.com"),T=(c=S,{getAllPosts:function(){var e=Object(p.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.api.get("posts");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),C=function(e){return{getAllComments:function(){var t=Object(p.a)(O.a.mark((function t(){var n,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.get("comments");case 2:return n=t.sent,c=n.data,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}(S),L=n(5),R=function(e){var t=Object(h.a)(e,2),n=t[0],c=t[1];if(n&&c){console.time("mapping posts and comments");for(var r=[],i=n.length,a=c.length,s=function(e){var t=void 0,s=void 0,o=void 0;n[e]?s=(t=n[e]).id:(t=n[e%i],o=Math.floor(e/i),s=t.id+i*o);var u=c.filter((function(e){return e.postId===t.id}));r[e]=Object(L.a)(Object(L.a)({},t),{},{oldId:t.id,id:s,comments:Object(m.a)(u.map((function(t){return Object(L.a)(Object(L.a)({},t),{},{id:e<i?t.id:t.id+a*o})})))})},o=0;o<10*i;o++)s(o);return console.timeEnd("mapping posts and comments"),r}},I=n.p+"static/media/spinner.93bf5f90.gif",F=n(50),P=n.n(F),B=function(){return Object(j.jsx)("figure",{className:P.a.imageWrapper,children:Object(j.jsx)("img",{className:P.a.image,src:I,alt:"spinner gif"})})},N=n(151),W=n(142),V=n(143),A=n(153),M=function(e){var t=e.post,n=t.title,c=t.body,r=t.id,i=Object(x.b)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(N.a,{style:{width:"22.5rem"},children:Object(j.jsxs)(N.a.Body,{className:"d-flex flex-column justify-content-between",children:[Object(j.jsxs)(N.a.Title,{children:[r," ",n]}),Object(j.jsx)(N.a.Text,{children:c}),Object(j.jsxs)(W.a,{children:[Object(j.jsx)(V.a,{children:Object(j.jsxs)(A.a,{variant:"outline-primary",style:{position:"relative"},children:[Object(j.jsx)(u.b,{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},to:{pathname:"/posts/".concat(r),state:e.post}}),"Read more"]})}),Object(j.jsx)(V.a,{children:Object(j.jsx)(A.a,{variant:"outline-primary",onClick:function(){return i(function(e){return{type:w,payload:e}}(r))},children:"Remove post"})}),Object(j.jsx)(V.a,{children:Object(j.jsx)(A.a,{variant:"outline-primary",onClick:function(){return i(function(e,t){return{type:y,payload:{id:e,data:t}}}(r,{title:"updated Title",body:"updated Body"}))},children:"edit"})})]})]})})})},U=Object(r.memo)(M),G=n(148),D=function(e){var t=e.posts,n=e.lastElement,c=Object(r.useState)([]),i=Object(h.a)(c,2),a=i[0],s=i[1],o=Object(r.useState)(""),u=Object(h.a)(o,2),l=u[0],d=u[1],b=Object(r.useMemo)((function(){return t.filter((function(e){return e.title.includes(l)||e.body.includes(l)}))}),[l,t]);return Object(r.useEffect)((function(){0!==t.length&&0===b.length?n.current.style.display="none":n.current.style.display="block",s(b)}),[b,n,t]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(G.a,{label:"postsFilter",variant:"outlined",name:"postsFilter",fullWidth:!0,onChange:function(e){d(e.target.value)}}),Object(j.jsx)("ul",{style:{display:"grid",maxWidth:"80vw",gridGap:"20px",marginLeft:"auto",marginRight:"auto",gridTemplateColumns:"repeat(4, 1fr)"},children:a.map((function(e){return Object(j.jsx)(U,{post:e},e.id)}))})]})},X=function(e){var t=e.value;return Object(j.jsx)("li",{children:t})},z=Object(r.memo)(X),H=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],i=Object(r.useRef)(),a=function(e){return new Promise((function(t){i.current=setTimeout((function(){return t(e)}),0)}))},s=function(){var e=Object(p.a)(O.a.mark((function e(t){var r,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=t;case 2:if(!(i<t+100)){e.next=10;break}return e.next=5,a(i);case 5:s=e.sent,r=[].concat(Object(m.a)(r),[s]);case 7:i++,e.next=2;break;case 10:c((function(){return[].concat(Object(m.a)(n),Object(m.a)(r))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n.length<1e9&&s(n.length)}),[n]),Object(r.useEffect)((function(){return s(n.length),function(){clearTimeout(i.current)}}),[]),Object(j.jsx)("ul",{style:{float:"left",width:"100px",overflowY:"auto",height:"300px",marginRight:"40px",padding:"5px"},children:n.map((function(e){return Object(j.jsx)(z,{value:e},e)}))})},J=Object(r.memo)(H),Q=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],i=Object(r.useRef)(),a=Object(x.c)((function(e){return e.posts})),s=a.postsList,o=a.isFetching,u=Object(x.b)();return Object(r.useEffect)((function(){c((function(e){return Object(m.a)(s.slice(0,e.length))}))}),[s]),function(e,t,n,c,i){var a=Object(r.useRef)();Object(r.useEffect)((function(){n||(a.current&&a.current.disconnect(),a.current=new IntersectionObserver((function(e,n){e[0].isIntersecting&&t&&setTimeout((function(){c(i)}),50)})),a.current.observe(e.current))}),[n,i])}(i,s.length!==n,o,(function(e){var t=function(e,t){var n=t.length;if(e.length!==n)return e.slice(n,n+50)}(s,e);t&&c((function(e){return[].concat(Object(m.a)(e),Object(m.a)(t))}))}),n),Object(r.useEffect)((function(){0===s.length&&function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(function(){var e=Object(p.a)(O.a.mark((function e(t){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:v}),e.next=3,Promise.all([T.getAllPosts(),C.getAllComments()]);case 3:n=e.sent,c=R(n),setTimeout((function(){t({type:g,payload:c})}),2e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(J,{}),o?Object(j.jsx)(B,{}):Object(j.jsx)("div",{children:Object(j.jsx)(D,{posts:n,lastElement:i})}),Object(j.jsx)("div",{ref:i,style:{height:"10px",backgroundColor:"red"}})]})},q=n(146),Y=n(150),K=n(147),Z=function(e){var t=e.comment,n=t.email,c=t.name,r=t.body;return Object(j.jsx)(q.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",children:Object(j.jsxs)(Y.a,{width:"50vw",py:"0.5rem",borderBottom:1,children:[Object(j.jsx)(Y.a,{children:Object(j.jsx)(K.a,{variant:"subtitle2",gutterBottom:!0,style:{wordWrap:"break-word"},children:n})}),Object(j.jsx)(Y.a,{children:Object(j.jsx)(K.a,{variant:"h6",gutterBottom:!0,style:{wordWrap:"break-word"},children:c})}),Object(j.jsx)(Y.a,{children:Object(j.jsx)(K.a,{variant:"body1",gutterBottom:!0,style:{wordWrap:"break-word"},children:r})})]})})},$=function(e){return e.comments.map((function(e){return Object(j.jsx)(Z,{comment:e},e.id)}))},ee=function(){var e=Object(l.f)().state,t=e.userId,n=e.body,c=e.title,r=e.comments;e.id;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["Author: ",t]}),Object(j.jsxs)("div",{children:["Title ",c]}),Object(j.jsx)("div",{children:n}),Object(j.jsx)("h5",{children:"Comments"}),Object(j.jsx)($,{comments:r})]})},te=n(152),ne=function(e){var t=e.item,n=(e.increment,e.decrement,t.id),c=t.value;return Object(r.useEffect)((function(){console.log("render heavy component item")})),Object(j.jsxs)("div",{style:{borderBottom:"1px solid black",marginBottom:"5px"},children:[Object(j.jsxs)("div",{children:["id: ",n]}),Object(j.jsxs)("div",{children:["value: ",c]}),Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)(te.a,{variant:"outlined",color:"primary",onClick:function(){var e=new CustomEvent("changeValue",{detail:{id:n,type:"increment"}});document.dispatchEvent(e)},children:"increment"}),Object(j.jsx)(te.a,{variant:"outlined",color:"primary",onClick:function(){var e=new CustomEvent("changeValue",{detail:{id:n,type:"decrement"}});document.dispatchEvent(e)},children:"decrement"})]})]})},ce=Object(r.memo)(ne),re=n(67),ie=n.n(re),ae=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1],i=function(e){switch(e.detail.type){case"increment":a(e.detail.id);break;case"decrement":s(e.detail.id);break;default:return}};Object(r.useEffect)((function(){var e=function(){console.time("fill array");for(var e=[],t=1;t<=1e3;t++){var n={id:t,value:t};e.push(n)}return console.timeEnd("fill array"),e}();c(e)}),[]),Object(r.useEffect)((function(){return document.addEventListener("changeValue",i),function(){return document.removeEventListener("changeValue",i)}}),[n]);var a=function(e){var t=n.find((function(t){return t.id===e})),r=n.findIndex((function(e){return e.id===t.id}));c((function(e){return[].concat(Object(m.a)(e.slice(0,r)),[Object(L.a)(Object(L.a)({},t),{},{value:t.value+1})],Object(m.a)(e.slice(r+1)))}))},s=function(e){var t=n.find((function(t){return t.id===e})),r=n.findIndex((function(e){return e.id===t.id}));c((function(e){return[].concat(Object(m.a)(e.slice(0,r)),[Object(L.a)(Object(L.a)({},t),{},{value:t.value-1})],Object(m.a)(e.slice(r+1)))}))};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:ie.a.walkaboutOldSchool}),Object(j.jsx)(J,{}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsx)(ce,{item:e},e.id)}))})]})};var se=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.a,{}),Object(j.jsxs)(u.a,{children:[Object(j.jsx)(d,{}),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{exact:!0,path:"/",children:Object(j.jsx)(b,{})}),Object(j.jsx)(l.a,{exact:!0,path:"/posts",children:Object(j.jsx)(Q,{})}),Object(j.jsx)(l.a,{path:"/posts/:id",children:Object(j.jsx)(ee,{})}),Object(j.jsx)(l.a,{path:"/heavycomponent",children:Object(j.jsx)(ae,{})})]})]})]})},oe=(n(113),n(38)),ue={postsList:[],isFetching:!1},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case v:return Object(L.a)(Object(L.a)({},e),{},{isFetching:!0});case g:return Object(L.a)(Object(L.a)({},e),{},{postsList:[].concat(Object(m.a)(e.postsList),Object(m.a)(c)),isFetching:!1});case y:var r=c.id,i=c.data;return Object(L.a)(Object(L.a)({},e),{},{postsList:e.postsList.map((function(e){return e.id!==r?e:Object(L.a)(Object(L.a)({},e),i)}))});case w:return Object(L.a)(Object(L.a)({},e),{},{postsList:Object(m.a)(e.postsList.filter((function(e){return e.id!==c})))});default:return e}},je=Object(oe.b)({posts:le}),de=n(68),be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.c,fe=Object(oe.d)(je,be(Object(oe.a)(de.a)));s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(x.a,{store:fe,children:Object(j.jsx)(se,{})})}),document.getElementById("root"))},50:function(e,t,n){e.exports={imageWrapper:"style_imageWrapper__34sXU",image:"style_image__1I26G"}},67:function(e,t,n){e.exports={walkaboutOldSchool:"animation_walkaboutOldSchool__3lcQg","slide-margin":"animation_slide-margin__3Nh8o"}}},[[114,1,2]]]);
//# sourceMappingURL=main.1d728cfa.chunk.js.map